(function(){"use strict";angular.module("tubular.models",[]).factory("tubulargGridColumnModel",function(){var n=function(n){return angular.isUndefined(n)?"None":n.indexOf("Asc")===0||n.indexOf("asc")===0?"Ascending":n.indexOf("Desc")===0||n.indexOf("desc")===0?"Descending":"None"};return function(t){this.Name=t.name||null;this.Label=t.label||null;this.Sortable=t.sortable==="true";this.SortOrder=parseInt(t.sortOrder)||-1;this.SortDirection=n(t.sortDirection);this.IsKey=t.isKey==="true";this.Searchable=t.searchable==="true";this.Visible=t.visible==="false"?!1:!0;this.Filter=null;this.DataType=t.columnType||"string";this.FilterOperators={string:{None:"None",Equals:"Equals",Contains:"Contains",StartsWith:"Starts With",EndsWith:"Ends With"},numeric:{None:"None",Equals:"Equals",Between:"Between",Gte:">=",Gt:">",Lte:"<=",Lt:"<"},date:{None:"None",Equals:"Equals",Between:"Between",Gte:">=",Gt:">",Lte:"<=",Lt:"<"},datetime:{None:"None",Equals:"Equals",Between:"Between",Gte:">=",Gt:">",Lte:"<=",Lt:"<"},boolean:{None:"None",Equals:"Equals"}}}}).factory("tubulargGridFilterModel",function(){return function(n){this.Text=n.text||null;this.Argument=n.argument||null;this.Operator=n.operator||null;this.OptionsUrl=n.optionsUrl||null}}).factory("tubularModel",["$timeout","$location",function(n,t){return function(n,i){var r={$key:"",$addField:function(t,i){this[t]=i;angular.isUndefined(this.$original)&&(this.$original={});this.$original[t]=i;angular.isUndefined(this.$state)&&(this.$state={});this.$state[t]={$valid:function(){return this.$errors.length==0},$errors:[]};n.$watch(function(){return r[t]},function(n,i){n!=i&&(r.$hasChanges=r[t]!=r.$original[t])})}},u;angular.isArray(i)==!1&&angular.forEach(Object.keys(i),function(n){r.$addField(n,i[n])});angular.isDefined(n.columns)&&angular.forEach(n.columns,function(n,t){var e=i[t]||i[n.Name],f,u;angular.isUndefined(e)&&i[t]===0&&(e=0);r.$addField(n.Name,e);(n.DataType=="date"||n.DataType=="datetime")&&(f=(new Date).toString().match(/([-\+][0-9]+)\s/)[1],f=f.substr(0,f.length-2)+":"+f.substr(f.length-2,2),u=new Date(Date.parse(r[n.Name]+f)),r[n.Name]=n.DataType=="date"?new Date(1900+u.getYear(),u.getMonth(),u.getDate()):new Date(1900+u.getYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),0));n.IsKey&&(r.$key+=r[n.Name]+",")});r.$key.length>1&&(r.$key=r.$key.substring(0,r.$key.length-1));r.$isEditing=!1;r.$hasChanges=!1;r.$selected=!1;for(u in r)u[0]!="$"&&(r.$state[u]={$valid:function(){return this.$errors.length==0},$errors:[]});return r.$valid=function(){var t,n;for(t in r.$state)if((n=t,!angular.isUndefined(r.$state[n])&&r.$state[n]!=null&&!angular.isUndefined(r.$state[n].$valid))&&!r.$state[n].$valid())return!1;return!0},r.save=function(t){return r.$hasChanges?n.updateRow(r,t):!1},r.edit=function(){r.$isEditing&&r.$hasChanges&&r.save();r.$isEditing=!r.$isEditing},r.delete=function(){n.deleteRow(r)},r.resetOriginal=function(){for(var n in r.$original)r.$original[n]=r[n]},r.revertChanges=function(){for(var n in r)n[0]=="$"||angular.isUndefined(r.$original[n])||(r[n]=r.$original[n]);r.$isEditing=!1;r.$hasChanges=!1},r.editForm=function(n){t.path(n+"/"+r.$key)},r}}])})();
//# sourceMappingURL=tubular-models.min.js.map
