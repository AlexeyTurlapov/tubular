(function(){"use strict";angular.module("tubular.directives").directive("tbTextSearch",[function(){return{require:"^tbGrid",template:'<div><div class="input-group input-group-sm"><span class="input-group-addon"><i class="glyphicon glyphicon-search"><\/i><\/span><input type="search" class="form-control" placeholder="search . . ." maxlength="20" ng-model="$component.search.Text" ng-model-options="{ debounce: 300 }"><span class="input-group-btn" ng-show="$component.search.Text.length > 0" ng-click="$component.search.Text = \'\'"><button class="btn btn-default"><i class="fa fa-times-circle"><\/i><\/button><\/span><div><div>',restrict:"E",replace:!0,transclude:!1,scope:{css:"@"},terminal:!1,controller:["$scope",function(n){n.$component=n.$parent.$parent;n.tubularDirective="tubular-grid-text-search";n.lastSearch="";n.$watch("$component.search.Text",function(t){if(!angular.isUndefined(t)){if(n.lastSearch!==""&&t===""){n.$component.search.Operator="None";n.$component.retrieveData();return}t===""||t.length<3||t!==n.lastSearch&&(n.lastSearch=t,n.$component.search.Operator="Auto",n.$component.retrieveData())}})}]}}]).directive("tbRemoveButton",["$compile",function(n){return{require:"^tbGrid",template:'<button ng-click="confirmDelete()" class="btn" ng-hide="model.$isEditing"><span ng-show="showIcon" class="{{icon}}"><\/span><span ng-show="showCaption">{{ caption || \'Remove\' }}<\/span><\/button>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=",caption:"@",icon:"@"},controller:["$scope","$element",function(t,i){t.showIcon=angular.isDefined(t.icon);t.showCaption=!(t.showIcon&&angular.isUndefined(t.caption));t.confirmDelete=function(){i.popover({html:!0,title:"Do you want to delete this row?",content:function(){return n('<div class="tubular-remove-popover"><button ng-click="model.delete()" class="btn btn-danger btn-xs">Remove<\/button>&nbsp;<button ng-click="cancelDelete()" class="btn btn-default btn-xs">Cancel<\/button><\/div>')(t)}});i.popover("show")};t.cancelDelete=function(){i.popover("destroy")}}]}}]).directive("tbSaveButton",[function(){return{require:"^tbGrid",template:'<div><button ng-click="save()" class="btn btn-default {{ saveCss || \'\' }}" ng-disabled="!model.$valid()" ng-show="model.$isEditing">{{ saveCaption || \'Save\' }}<\/button><button ng-click="cancel()" class="btn {{ cancelCss || \'btn-default\' }}" ng-show="model.$isEditing">{{ cancelCaption || \'Cancel\' }}<\/button><\/div>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=",isNew:"=?",component:"=?",saveCaption:"@",saveCss:"@",cancelCaption:"@",cancelCss:"@"},controller:["$scope",function(n){if(n.isNew=n.isNew||!1,n.isNew&&angular.isUndefined(n.component))throw"Define component.";n.save=function(){n.isNew?n.component.createRow():n.model.edit()};n.cancel=function(){n.model.revertChanges()}}]}}]).directive("tbEditButton",[function(){return{require:"^tbGrid",template:'<button ng-click="model.edit()" class="btn btn-default {{ css || \'\' }}" ng-hide="model.$isEditing">{{ caption || \'Edit\' }}<\/button>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=",caption:"@",css:"@"}}}]).directive("tbPageSizeSelector",[function(){return{require:"^tbGrid",template:'<div class="{{css}}"><form class="form-inline"><div class="form-group"><label class="small">{{ caption || \'Page size:\' }}<\/label><select ng-model="$parent.$parent.pageSize" class="form-control input-sm {{selectorCss}}" ng-options="item for item in options"><\/select><\/div><\/form><\/div>',restrict:"E",replace:!0,transclude:!0,scope:{caption:"@",css:"@",selectorCss:"@",options:"=?"},controller:["$scope",function(n){n.options=angular.isDefined(n.options)?n.options:["10","20","50","100"]}]}}]).directive("tbExportButton",[function(){return{require:"^tbGrid",template:'<div class="btn-group"><button class="btn btn-default dropdown-toggle {{css}}" data-toggle="dropdown" aria-expanded="false"><span class="fa fa-download"><\/span>&nbsp;Export CSV&nbsp;<span class="caret"><\/span><\/button><ul class="dropdown-menu" role="menu"><li><a href="javascript:void(0)" ng-click="downloadCsv($parent)">Current rows<\/a><\/li><li><a href="javascript:void(0)" ng-click="downloadAllCsv($parent)">All rows<\/a><\/li><\/ul><\/div>',restrict:"E",replace:!0,transclude:!0,scope:{filename:"@",css:"@"},controller:["$scope","tubularGridExportService",function(n,t){n.$component=n.$parent.$parent;n.downloadCsv=function(){t.exportGridToCsv(n.filename,n.$component)};n.downloadAllCsv=function(){t.exportAllGridToCsv(n.filename,n.$component)}}]}}]).directive("tbPrintButton",[function(){return{require:"^tbGrid",template:'<button class="btn btn-default" ng-click="printGrid()"><span class="fa fa-print"><\/span>&nbsp;Print<\/button>',restrict:"E",replace:!0,transclude:!0,scope:{title:"@",printCss:"@"},controller:["$scope",function(n){n.$component=n.$parent.$parent;n.printGrid=function(){n.$component.getFullDataSource(function(t){var r="<table class='table table-bordered table-striped'><thead><tr>"+n.$component.columns.map(function(n){return"<th>"+(n.Label||n.Name)+"<\/th>"}).join(" ")+"<\/tr><\/thead><tbody>"+t.map(function(n){return"<tr>"+n.map(function(n){return"<td>"+n+"<\/td>"}).join(" ")+"<\/tr>"}).join(" ")+"<\/tbody><\/table>",i=window.open("about:blank","Print","menubar=0,location=0,height=500,width=800");i.document.write('<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" />');n.printCss!=""&&i.document.write('<link rel="stylesheet" href="'+n.printCss+'" />');i.document.write('<body onload="window.print();">');i.document.write("<h1>"+n.title+"<\/h1>");i.document.write(r);i.document.write("<\/body>");i.document.close()})}}]}}])})();
//# sourceMappingURL=tubular-directives-grid.min.js.map
